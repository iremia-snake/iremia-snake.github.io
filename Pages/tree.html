<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html, body{
            min-height: 100%;
            overflow: hidden;
            background-color: black;
        }
        input{
            display: block;
            width: 200px;
            height: 30px;
            line-height: 30px;
            font-size: 30px;
            outline: none;
            background-color: rgb(68, 47, 82);
            border: white;
            color: white;
            margin: auto;
        }
    </style>
</head>
<body>
    <input type="number" id="seedInp">
    <canvas class="drawing"></canvas>
</body>
<script>
    'use strict'
    window.onload = main;
    function main(){
        const canvas = document.body.getElementsByClassName('drawing')[0];
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const ctx = canvas.getContext('2d');
        ctx.strokeStyle = "white";
        ctx.fillStyle = "black";
        const pos = [800, 670];
        const fps = 40;
        var siid;
        document.body.getElementsByTagName('input')[0].oninput = (event)=>{
            var n = 0;
            clearInterval(siid);
            if(event.srcElement.value >= 0){
                var sacura = new Tree(30, 120, 8, event.srcElement.value);
                siid = setInterval(()=>{
                    n++;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    sacura.alphaDeg = 30 + Math.sin(n/fps);
                    sacura.draw(ctx, pos);

                    sacura.trunkLength = 60;
                    sacura.alphaDeg = -26 + Math.cos(n/fps);;
                    sacura.draw(ctx, [pos[0] + 500, pos[1]]);
                    sacura.draw(ctx, [pos[0] - 500, pos[1]]);
                    sacura.trunkLength = 120;
                }, 1000/fps);
            }
        };
    }
    
    class Tree{
        randomValues = [
            .91, .32, .51, .01, .70, .13, .30, .53, .35, .09, .98, .81, .03, .38, .73, .48, .44, .68, .92, .90, .81, .89, .20, .11, .34, .64, .50, .93, .07, .37, .11, .04, .38, .40, .42, .80, .56, .88, .04, .26, .85, .59, .85, .50, .68, .15, .32, .80, .84, .30, .38, .19, .93, .84, .84, .84, .51, .61, .89, .52, .99, .83, .41, .63, .47, .04, .36, .26, .94, .59, .94, .56, .86, .64, .56, .06, .72, .76, .85, .67, .87, .16, .29, .14, .86, .54, .97, .46, .12, .67, .92, .00, .49, .02, .38, .02, .94, .42, .21, .34, .05, .27, .37, .35, .86, .26, .08, .47, .70, .28, .78, .00, .01, .14, .55, .05, .00, .13, .64, .33, .21, .13, .68, .19, .23, .28, .76, .71, .51, .32, .04, .86, .07, .34, .30, .39, .11, .95, .42, .03, .41, .14, .06, .28, .53, .62, .79, .95, .68, .18, .12, .51, .17, .36, .26, .70, .62, .41, .70, .20, .16, .31, .31, .47, .77, .51, .09, .61, .37, .94, .20, .03, .39, .87, .78, .61, .46, .16, .85, .33, .77, .85, .58, .42, .84, .29, .27, .16, .68, .48, .30, .45, .43, .33, .70, .27, .21, .04, .64, .56, .82, .69, .69, .49, .21, .49, .34, .93, .93, .47, .48, .62, .73, .64, .56, .36, .80, .40, .23, .23, .96, .27, .08, .23, .94, .18, .98, .83, .67, .15, .44, .76, .80, .22, .98, .25, .31, .69, .20, .13, .67, .50, .87, .38, .06, .38, .48, .92, .03, .77, .97, .06, .74, .66, .72, .00, .03, .48, .27, .30, .24, .31, .42, .06, .87, .11, .06, .37, .84, .11, .31, .51, .72, .24, .30, .60, .16, .83, .82, .02, .98, .39, .31, .29, .68, .82, .82, .43, .07, .25, .11, .96, .60, .83, .31, .29, .66, .08, .36, .40, .39, .78, .79, .96, .56, .80, .49, .20, .64, .46, .33, .87, .72, .65, .42, .64, .71, .25, .27, .01, .02, .20, .16, .86, .27, .91, .66, .02, .83, .77, .43, .62, .11, .21, .26, .94, .49, .09, .06, .52, .21, .67, .78, .33, .99, .00, .10, .95, .22, .84, .74, .65, .23, .12, .65, .30, .51, .67, .20, .86, .18, .63, .11, .95, .90, .54, .74, .07, .31, .79, .55, .90, .67, .97, .29, .59, .71, .26, .10, .77, .83, .31, .76, .94, .24, .07, .99, .69, .22, .94, .84, .16, .44, .36, .70, .12, .87, .10, .31, .82, .29, .36, .61, .95, .60, .19, .46, .36, .88, .74, .61, .69, .24, .32, .57, .29, .91, .91, .58, .50, .25, .21, .26, .87, .94, .79, .37, .37, .00, .29, .27, .91, .76, .11, .85, .79, .75, .54, .10, .47, .71, .31, .20, .29, .22, .28, .93, .39, .48, .09, .91, .89, .88, .12, .19, .54, .68, .75, .42, .85, .21, .98, .38, .79, .34, .41, .68, .57, .76, .50, .25, .88, .69, .84, .26, .04, .72, .63, .66, .08, .87, .32, .85, .77, .44, .78, .39, .91, .19, .67, .48, .17, .96, .35, .58, .31, .82, .83, .34, .75, .87, .53, .69, .11, .98, .56, .26, .33, .45, .17, .04, .57, .89, .05, .66, .69, .18, .53, .02, .67, .53, .56, .06, .29, .70, .06, .15, .99, .89, .35, .19, .72, .75, .80, .61, .37, .48, .46, .40, .94, .52, .33, .63, .51, .67, .84, .84, .59, .31, .49, .13, .31, .69, .01, .65, .55, .02, .19, .85, .45, .04, .29, .16, .67, .11, .79, .30, .51, .53, .40, .13, .31, .33, .04, .68, .02, .58, .99, .75, .57, .02, .51, .17, .91, .35, .64, .12, .25, .18, .31, .75, .81, .69, .15, .35, .11, .58, .82, .59, .53, .12, .09, .08, .71, .33, .98, .76, .84, .48, .68, .99, .14, .27, .74, .28, .54, .87, .55, .30, .34, .67, .53, .40, .77, .25, .27, .89, .99, .25, .77, .29, .44, .76, .87, .11, .96, .86, .41, .14, .32, .56, .95, .87, .54, .75, .93, .15, .45, .10, .16, .81, .58, .00, .29, .07, .43, .12, .06, .86, .57, .13, .98, .01, .61, .83, .28, .27, .15, .66, .85, .10, .35, .81, .53, .26, .31, .81, .61, .56, .26, .64, .75, .13, .45, .70, .98, .96, .93, .09, .40, .52, .76, .77, .13, .35, .33, .37, .16, .78, .85, .59, .29, .67, .27, .78, .88, .07, .81, .64, .37, .87, .73, .88, .76, .61, .98, .15, .30, .25, .96, .45, .50, .36, .55, .23, .53, .10, .54, .75, .86, .45, .21, .47, .08, .68, .02, .40, .99, .08, .50, .06, .16, .62, .85, .64, .07, .95, .01, .84, .35, .42, .98, .50, .74, .16, .55, .75, .45, .40, .77, .86, .76, .44, .33, .90, .33, .17, .91, .84, .27, .48, .64, .96, .83, .88, .27, .20, .36, .84, .62, .57, .72, .48, .65, .58, .95, .80, .92, .92, .53, .64, .01, .07, .65, .59, .63, .14, .54, .43, .01, .27, .08, .96, .25, .84, .92, .68, .75, .21, .97, .29, .15, .86, .26, .15, .71, .99, .46, .63, .10, .06, .82, .56, .06, .43, .82, .21, .89, .79, .97, .90, .18, .08, .11, .74, .97, .64, .76, .53, .32, .58, .87, .12, .11, .77, .81, .01, .14, .87, .63, .33, .46, .04, .32, .40, .00, .93, .99, .52, .87, .13, .54, .96, .40, .98, .86, .14, .60, .37, .71, .88, .23, .85, .76, .97, .82, .85, .61, .59, .25, .45, .72, .90, .41, .19, .95, .06, .85, .62, .61, .08, .32, .93, .95, .91, .63, .73, .32, .25, .93, .66, .77, .97, .22, .04, .02, .64, .20, .54, .00, .01, .34, .98, .05, .15, .32, .09, .50, .33, .97, .73, .96, .99, .49, .73, .09, .57, .21, .14, .87, .68, .65, .46, .22, .99, .50, .81, .31, .05, .67, .95, .21, .59, .76, .74, .14, .48, .03, .68, .36, .58, .91, .73, .00, .94, .26, .62, .80, .98, .55, .95, .43, .90, .41, .96, .62, .97, .62, .40, .25, .04, .87, .06, .38, .92, .64, .19, .66, .45, .03, .65, .86, .19, .36, .09, .50, .55, .98, .24, .41, .15, .30, .11, .40, .03, .51, .47, .63, .34, .24, .94
        ];

        constructor(alphaDeg, trunkLength, iteraionCount, seed) {
            this.alphaDeg = alphaDeg;
            this.trunkLength = trunkLength;
            this.iteraionCount = iteraionCount;
            this.seed = seed;
            this.color = this.randomColor();
        }
        draw(ctx, pos){

            drawFractal(ctx, pos, this.color, this.trunkLength, 180, this.alphaDeg, this.seed, this.iteraionCount, this.randomValues);
            
            function drawFractal(ctx, pos, color, length, deg, alphaDeg, seed = undefined, iter = 0, rv = []){
                ctx.lineWidth = iter * 0.5;
                ctx.strokeStyle = color;
                const newPos = line(ctx, pos[0], pos[1], deg, length);
                if(iter > 0 && length > 2){
                    if(rv[seed%rv.length] > 0.5){
                        length *= 0.5;
                    }
                    if(rv[(seed+1)%rv.length] > 0.8){
                        drawFractal(ctx, newPos, color, length * 0.8, deg, alphaDeg, seed+2, iter-1, rv);
                    }
                    drawFractal(ctx, newPos, color, length * 0.8, deg + alphaDeg, alphaDeg, seed+3, iter-1, rv);
                    drawFractal(ctx, newPos, color, length * 0.8, deg - alphaDeg, alphaDeg, seed+4, iter-1, rv);
                }
            }
            
            function line(ctx, posX, posY, deg, len){
                const newX = posX + Math.sin(deg * Math.PI / 180) * len;
                const newY = posY + Math.cos(deg * Math.PI / 180) * len;
                ctx.beginPath();
                ctx.moveTo(posX, posY);
                ctx.lineTo(newX, newY);
                ctx.stroke();
                return [newX, newY];  
            }
        }
        randInt(min, max){
            return Math.floor(min + Math.random() * (max-min));
        }
        randomColor(){
            return `rgb(${this.randInt(0,255)}, ${this.randInt(0,255)}, ${this.randInt(0,255)})`;
        }
    }
        
</script>
</html>